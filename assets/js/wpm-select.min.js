!function(u){u.fn.wpmSelect=function(_){var g=u.extend({placeholder:!1,allowClear:!1,autofocus:!0,search:!!u(this).attr("data-wpm-search")&&"true"==u(this).attr("data-wpm-search")},_),f=g.search?"wpm-select-wrap_open":"wpm-select-wrap_open-dropdown";return this.each(function(){var t,l=this;u(l).css({position:"absolute",zIndex:"-1",opacity:"0",width:"1px",height:"1px"}),u(this).attr("data-wpm-placeholder")&&(t=u(this).attr("data-wpm-placeholder"),u(l).prepend('<option disabled value=""></option>'),u(l).val(u(l).children().first().val()));var o,i,s={options:[]},n=u('<div class="wpm-select-wrap"></div>'),a=u('<div class="wpm-select-placeholder"></div>');t?(o=u("<div class='wpm-select-placeholder__single'></div>"),a.append(o),i=u("<div class='wpm-select-placeholder__rendered'>"+t+"</div>"),a.append(i)):(o=u("<div class='wpm-select-placeholder__single'>"+l.options[0].innerText+"</div>"),a.append(o));var p,e=u('<div class="wpm-select-placeholder__buttons"></div>'),d=u('<div class="wpm-select-placeholder__arrow"><svg height="20" width="20" viewBox="0 0 20 20"><path fill="rgb(40, 43, 93)" d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg></div>');a.append(e),d.on("click",function(e){n.hasClass(f)&&(e.preventDefault(),e.stopPropagation(),v=!1,n.removeClass(f))}),e.append(d),g.allowClear&&g.search&&(d=u('<div style="opacity: 0;" class="wpm-select-placeholder__clear"><svg height="20" width="20" viewBox="0 0 20 20"><path fill="rgb(40, 43, 93)" d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div>'),e.prepend(d),d.on("click",function(e){n.hasClass(f)||(r.html(""),t?(u(l).val(""),o.text(""),i.text(t)):(u(l).val(u(l.options).first().val()),o.text(u(l.options).first().text())),o.removeClass("wpm-select-placeholder__single_active"),r.find(".wpm-select-dropdown__option").first().addClass("wpm-select-dropdown__option_highlighted").siblings().removeClass("wpm-select-dropdown__option_highlighted"),p.focus(),p.val("").trigger("keyup"),v=!0,n.addClass(f),console.log(u(l).val()),void 0!==_.onClear&&_.onClear(u(l)))})),g.search&&(p=u('<input type="text" class="wpm-select-placeholder__search">'),a.prepend(p),p.on("keyup",function(e){clearTimeout(void 0);var t=u(this);r.html("");var o=t.val().toLowerCase().trim();o?s.options.filter(function(e){-1<u(e).text().toLowerCase().trim().indexOf(o)&&r.append(u(e))}):s.options.filter(function(e){r.append(u(e))}),r&&r.find(".wpm-select-dropdown__option").first().addClass("wpm-select-dropdown__option_highlighted"),h(r.find(".wpm-select-dropdown__option")),0==r.children().length&&r.html('<div class="wpm-select-dropdown__empty">No options</div>'),"Enter"!==e.key&&13!==e.keyCode||w(r.find(".wpm-select-dropdown__option_highlighted"),!0)}),p.on("keydown",function(e){9===e.keyCode&&w(r.find(".wpm-select-dropdown__option_highlighted"),!0)})),n.append(a),u(l).after(n);var c=u('<div class="wpm-select-dropdown-container"></div>'),r=u('<div class="wpm-select-dropdown"></div>');function h(e){e.on("mouseenter",function(){u(this).addClass("wpm-select-dropdown__option_highlighted").siblings().removeClass("wpm-select-dropdown__option_highlighted")}),w(e)}function w(e,t){e.on("click",function(e){e.stopPropagation(),e.stopImmediatePropagation();var i=u(this).attr("data-wpmval").toLowerCase().trim(),e=u(this).text();a.find(".wpm-select-placeholder__single").text(e).addClass("wpm-select-placeholder__single_active"),v=!1,n.removeClass(f),u(l.options).filter(function(e,t){var o=u(t).val().toLowerCase().trim();i===o&&u(l).val(u(t).val())}),console.log(u(l).val()),void 0!==_.onSelected&&_.onSelected(u(l))}),t&&e.trigger("click")}c.append(r),console.time("time"),console.timeEnd("time"),u("body").on("click",function(e){v=!1,n.removeClass(f)});var v=!1,m=!1;a.on("click",function(e){if(e.stopPropagation(),!m){m=!0;for(var t=document.createDocumentFragment(),o=0;o<l.options.length;o++)l.options[o].value&&((e=document.createElement("div")).className="wpm-select-dropdown__option",e.setAttribute("data-wpmval",u(l.options[o]).clone().val()),e.textContent=u(l.options[o]).clone().text(),t.appendChild(e),s.options.push('<div class="wpm-select-dropdown__option" data-wpmval="'+u(l.options[o]).val()+'">'+u(l.options[o]).text()+"</div>"));r.get(0).appendChild(t),a.after(c)}v||(v=!0,r.find(".wpm-select-dropdown__option_highlighted").length||r.find(".wpm-select-dropdown__option").first().addClass("wpm-select-dropdown__option_highlighted"),n.addClass(f),g.autofocus&&g.search&&p.get(0).focus(),h(r.find(".wpm-select-dropdown__option")))})})}}(jQuery);